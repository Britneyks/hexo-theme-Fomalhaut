---
title: åŸºäºFPGAçš„LCDæ˜¾ç¤ºå®éªŒçš„å­¦ä¹ å’Œç†è§£
tags:
  - LCDæ¶²æ™¶æ˜¾ç¤ºæ¨¡å—
  - FPGA
categories:
  - FPGAå­¦ä¹ 
mathjax: true
swiper_index: 3
description: ğŸ¥§æœ¬æ–‡ä¸»è¦è®°å½•äº†åœ¨å½©æ¡æ˜¾ç¤ºå®éªŒä¸­å¯¹LCDæ¶²æ™¶æ˜¾ç¤ºæ¨¡å—çš„å­¦ä¹ 
abbrlink: 5f518ffb
date: 2024-03-06 13:49:01
---
{% note blue 'fas fa-bullhorn' flat %}ğŸŒˆä»¥ä¸‹æ˜¯æœ¬äººå¯¹LCDæ¶²æ™¶æ˜¾ç¤ºæ¨¡å—çš„ç†è§£ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åç»­çš„å­¦ä¹ ï¼Œå¦‚æœ‰è¡¥å……å’Œé”™è¯¯ï¼Œæ¬¢è¿è¯„è®ºåŒºç•™è¨€ï¼{% endnote %}

## 1.å®éªŒè®¾å¤‡åŠè¦æ±‚
&emsp; **å®éªŒè®¾å¤‡ï¼šæ­£ç‚¹åŸå­è¾¾èŠ¬å¥‡å¼€å‘æ¿ï¼ˆXilinxï¼‰ï¼ŒLCDæ¶²æ™¶æ˜¾ç¤ºå±ã€‚**
&emsp; **å®éªŒè¦æ±‚ï¼šä½¿ç”¨FPGAå¼€å‘æ¿åœ¨LCDæ¶²æ™¶æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤º4è‰²å½©æ¡ï¼Œè¦æ±‚å…¼å®¹å››ç§å‹å·çš„LCDå±å¹•ã€‚**
&emsp; **å¼€å‘ç¯å¢ƒï¼šVivado_2020.2ã€Notepad++ã€Visioã€‚**
***
## 2.LCDæ¶²æ™¶æ˜¾ç¤ºå±ç¡¬ä»¶çŸ¥è¯†æ±‡æ€»
<!-- &emsp; **æœ¬äººæ˜¯ä»æ­£ç‚¹åŸå­å®˜ç½‘è´­ä¹°çš„7å¯¸LCDå±å¹•ï¼Œåˆ†è¾¨ç‡ä¸º1080*600ï¼Œä»·æ ¼æ˜¯{% nota 246.02Â¥, æ„Ÿè°¢è€å¸ˆæ…·æ…¨æŠ¥é”€ğŸ¥¹ %}ã€‚** -->
### 2.1.LCDå®ç‰©å›¾åŠåŒºåŸŸåˆ’åˆ†
{% gallery true,,10 %}
![å›¾ç‰‡1.png](https://bu.dusays.com/2024/03/06/65e80de37e878.png)
![å›¾ç‰‡2.png](https://bu.dusays.com/2024/03/06/65e80de3b5e15.png)
{% endgallery %}
&emsp; **å›¾äºŒä¸­çš„VSYNCã€HSYNCåˆ†åˆ«æ˜¯åœºåŒæ­¥ä¿¡å·å’Œè¡ŒåŒæ­¥ä¿¡å·ï¼Œå½“ä¸€å¸§å›¾ç‰‡æ˜¾ç¤ºå®Œæˆï¼ŒåœºåŒæ­¥ä¿¡å·æ‹‰ä½è¡¨ç¤ºæ–°çš„ä¸€å¸§å›¾ç‰‡æ˜¾ç¤ºçš„å¼€å§‹ï¼›å½“ä¸€è¡Œä¿¡å·æ˜¾ç¤ºå®Œæˆæ—¶ï¼Œè¡ŒåŒæ­¥ä¿¡å·æ‹‰ä½è¡¨ç¤ºä¸‹ä¸€è¡Œæ•°æ®æ˜¾ç¤ºçš„å¼€å§‹ã€‚VFPã€VBPã€HFPã€HBPåˆ†åˆ«æ˜¯åœºå‰å»¶ã€åœºåå»¶ã€è¡Œå‰å»¶å’Œè¡Œåå»¶ï¼Œè¿™éƒ¨åˆ†åŒºåŸŸä¸æ˜¾ç¤ºæœ‰æ•ˆä¿¡æ¯ï¼Œè¿™éƒ¨åˆ†æ‰€æ¶ˆè€—çš„æ—¶é—´ç§°ä¸ºâ€œæ¶ˆéšæ—¶é—´â€ã€‚ä»¥ä¸‹æ˜¯ä»¥ä¸Šä¿¡å·çš„å…·ä½“å‚æ•°å’Œæ¶ˆè€—æ—¶é—´ï¼š**
<img src="https://bu.dusays.com/2024/03/06/65e8149fbbf11.png" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;"/></img>

&emsp; &emsp; **LCDï¼ˆ1024*600ï¼‰åˆ·æ–°ä¸€å¸§çš„æ—¶é—´ï¼š**
&emsp; &emsp; **= (VSPW + VBP + LINE + VFP) * (HSPW + HBP + HOZVAL + HFP)**
&emsp; &emsp; **= (3 + 20 +600 +12) * (20 +140 +1024 +160)**
&emsp; &emsp; **= 635 * 1344**
&emsp; &emsp; **= 853440 ns**
&emsp; **LCDæ˜¾ç¤ºä¸€è¡Œçš„æ€»æ—¶é—´ = (è¡Œåå»¶æ—¶é—´ + è¡Œå‰å»¶æ—¶é—´ + è¡ŒåŒæ­¥ä¿¡å·ç»´æŒæ—¶é—´ + è¡Œæœ‰æ•ˆæ•°æ®æ—¶é—´)ï¼Œæ ¹æ®è¿™ä¸ªå…¬å¼å¯çŸ¥æ˜¾ç¤ºä¸€è¡Œçš„æ—¶é—´å°±æ˜¯1344nsï¼Œè€Œåˆ†è¾¨ç‡ä¸º1024 * 600çš„LCDå±çš„æ€»è¡Œæ•° = (600ä¸ªæœ‰æ•ˆè¡Œæ•° + 20è¡Œåœºå‰å»¶ + 12è¡Œåœºåå»¶)ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰åœºåŒæ­¥ä¿¡å·çš„ç»´æŒæ—¶é—´ï¼Œå®ƒç»´æŒäº†3ä¸ªåœºï¼ˆå¸§ï¼‰æ—¶åºï¼Œå³ç»´æŒæ—¶é—´æ˜¯3 * 1344 nsï¼Œæ•…æ€»æ—¶é—´å°±æ˜¯853440 nsï¼Œè¿™æ˜¯ä¸€å¸§å›¾åƒæ‰€éœ€è¦çš„æ˜¾ç¤ºæ—¶é—´ï¼Œå¦‚æœæˆ‘éœ€è¦60HZåˆ·æ–°ç‡ï¼Œå³ä¸€ç§’é’Ÿ60å¸§ï¼Œåˆ™å®ƒçš„æ‰€éœ€è¦çš„æ—¶é’Ÿçº¦ä¸º{% nota 51.2 Mhz, 853440 *60 = 51206400 â‰ˆ 51.2M %}ã€‚**
### 2.1.LCDæ¨¡å—å¼•è„šåˆ†å¸ƒåŠåŠŸèƒ½
<img src="https://bu.dusays.com/2024/03/06/65e8255f3de0c.png" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;"/>

|å¼•è„š|ä½œç”¨|å¼•è„š|ä½œç”¨|
|:--:|:--:|:--:|:--:|
|LCD R[0:7]|Redåƒç´ è¾“å…¥|RESET|LCDå¤ä½|
|LCD G[0:7]|Greenåƒç´ è¾“å…¥|LCD BL|LCDèƒŒå…‰æ§åˆ¶|
|LCD B[0:7]|Blueåƒç´ è¾“å…¥|LCD DE|LCDæ•°æ®è¾“å…¥|
|LCD CLK|LCDå¤ä½|LCD VSYNC|LCDåœºåŒæ­¥ä¿¡å·|
|PIN 35~39|è§¦æ‘¸ç›¸å…³|LCD HSYNC|LCDè¡ŒåŒæ­¥ä¿¡å·|

> **{% span red, æ³¨ï¼š%}R[7]ã€G[7]ã€B[7]çš„å¼•è„šä¸ºinoutç±»å‹ï¼ŒFPGAé€šè¿‡è¯»å–è¿™ä¸‰ä¸ªå¼•è„šçš„å€¼ï¼Œå¯ä»¥åˆ¤æ–­å½“å‰LCDçš„åˆ†è¾¨ç‡ã€‚**
***
# 3.å®éªŒè®¾è®¡
## 3.1ç¡¬ä»¶æ¨¡å—çš„è®¾è®¡
1. **rd_idæ¨¡å—**
<img src="https://bu.dusays.com/2024/03/06/65e82df47f54e.png" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;"/>

|ç®¡è„šåç§° |å¼•è„šç±»å‹|ä½œç”¨|
|:--:|:--:|:--:|
|clk|input|æ—¶é’Ÿ|
|rst_n|input|å¤ä½|
|lcd_rgb|input|åˆ¤æ–­LCDåˆ†è¾¨ç‡|
|lcd_id|output|è¾“å‡ºLCDç±»å‹|
> rd_idæ¨¡å—ä½œç”¨ï¼šé€šè¿‡R[7]ã€G[7]ã€B[7]çš„ä¿¡å·åˆ¤æ–­å½“å‰çš„LCDå±idæ•°æ®ã€‚
2. **clk_divæ¨¡å—**
<img src="https://bu.dusays.com/2024/03/06/65e82fca652cd.png" alt="å›¾ç‰‡5.png" style="zoom:50%;" />

|ç®¡è„šåç§°|å¼•è„šç±»å‹|ä½œç”¨|
|:--:|:--:|:--:|
|clk|input|æ—¶é’Ÿ|
|rst_n|input|å¤ä½|
|lcd_id|input|è¯»å–å½“å‰LCDç±»å‹|
|lcd_pclk|output|æ ¹æ®LCDç±»å‹è¾“å‡ºå¯¹åº”æ—¶é’Ÿ|
> clk_divæ¨¡å—ä½œç”¨ï¼šæ ¹æ®rd_idæ¨¡å—çš„lcd_idå‚æ•°ï¼Œè¾“å‡ºå¯¹åº”çš„æ—¶é’Ÿé¢‘ç‡ï¼Œä¸ºåç»­æ¨¡å—æä¾›æ—¶é’Ÿä¿¡å·ã€‚
3. **lcd_displayæ¨¡å—**
<img src="https://bu.dusays.com/2024/03/06/65e8378da0435.png" alt="å›¾ç‰‡7.png" style="zoom:50%;" />

|ç®¡è„šåç§°|å¼•è„šç±»å‹|ä½œç”¨|
|:--:|:--:|:--:|
|lcd_pclk|input|æ—¶é’Ÿ|
|rst_n|input|å¤ä½|
|pixel_xpos|input|å½“å‰åƒç´ ç‚¹æ¨ªåæ ‡|
|pixel_ypos|input|å½“å‰åƒç´ ç‚¹çºµåæ ‡|
|h_disp|input|LCDå±æ°´å¹³åˆ†è¾¨|
|v_disp|input|LCDå±å‚ç›´åˆ†è¾¨|
|pixel_data|output|è¾“å‡ºåƒç´ æ•°æ®|
> lcd_displayæ¨¡å—ä½œç”¨ï¼šlcd_driveæ¨¡å—æä¾›å½“å‰åƒç´ åæ ‡ä»¥åŠLCDåˆ†è¾¨ç‡ï¼Œæ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œè¾“å‡ºå½“å‰ä½ç½®éœ€è¦æ˜¾ç¤ºçš„é¢œè‰²æ•°æ®ã€‚
4. **lcd_driveæ¨¡å—**
<img src="https://bu.dusays.com/2024/03/06/65e831195132d.png" alt="å›¾ç‰‡6.png" style="zoom:50%;" />

|ç®¡è„šåç§°|å¼•è„šç±»å‹|ä½œç”¨|
|:--:|:--:|:--:|
|lcd_pclk|input|æ—¶é’Ÿ|
|rst_n|input|å¤ä½|
|lcd_id|input|è¯»å–å½“å‰LCDç±»å‹|
|pixel_data|input|è¯»å–åƒç´ æ•°æ®|
|pixel_xpos|output|å½“å‰åƒç´ ç‚¹æ¨ªåæ ‡|
|pixel_ypos|output|å½“å‰åƒç´ ç‚¹çºµåæ ‡|
|h_disp|output|LCDå±æ°´å¹³åˆ†è¾¨|
|v_disp|output|LCDå±å‚ç›´åˆ†è¾¨|
|lcd_de|output|LCDæ•°æ®ä½¿èƒ½ä¿¡å·|
|lcd_hs|output|LCDè¡ŒåŒæ­¥ä¿¡å·|
|lcd_vs|output|LCDåœºåŒæ­¥ä¿¡å·|
|lcd_bl|output|LCDèƒŒå…‰æ§åˆ¶ä¿¡å·|
|lcd_clk|output|LCDåƒç´ æ—¶é’Ÿ|
|lcd_rst|output|LCDå¤ä½|
|lcd_rgb|output|LCDé¢œè‰²æ•°æ®|
> lcd_driveæ¨¡å—ï¼šè¯»å–LCDçš„idå‚æ•°ï¼Œå¹¶å‘lcd_driveæ¨¡å—ä¸­æä¾›LCDçš„åˆ†è¾¨ç‡å’Œå½“å‰åƒç´ ä½ç½®åæ ‡ï¼Œæ ¹æ®å†…éƒ¨çš„lcd_deä¿¡å·ï¼Œé€šè¿‡LCDæ˜¾ç¤ºé¢œè‰²ã€‚ 
5. **é¡¶å±‚æ¨¡å—æ¡†æ¶**
![å›¾ç‰‡8.png](https://bu.dusays.com/2024/03/06/65e84f9d05ef8.png)
## 3.2ç¨‹åºè®¾è®¡
{% note warning flat %}ä»¥ä¸‹æºç ç”±æ­£ç‚¹åŸå­æä¾›{% endnote %}
{% tabs  %}
<!-- tab rd_idæ¨¡å— -->
```verilog
module rd_id(
    input                   clk    ,    //æ—¶é’Ÿ
    input                   rst_n  ,    //å¤ä½ï¼Œä½ç”µå¹³æœ‰æ•ˆ
    input           [23:0]  lcd_rgb,    //RGB LCDåƒç´ æ•°æ®,ç”¨äºè¯»å–ID
    output   reg    [15:0]  lcd_id     //LCDå±ID
    );

//reg define
reg            rd_flag;  //è¯»IDæ ‡å¿—

//*****************************************************
//**                    main code
//*****************************************************

//è·å–LCD ID   M2:B7  M1:G7  M0:R7
always @(posedge clk or negedge rst_n) begin
    if(!rst_n) begin
        rd_flag <= 1'b0;
        lcd_id <= 16'd0;
    end    
    else begin
        if(rd_flag == 1'b0) begin
            rd_flag <= 1'b1; 
            case({lcd_rgb[7],lcd_rgb[15],lcd_rgb[23]})
                3'b000 : lcd_id <= 16'h4342;    //4.3' RGB LCD  RES:480x272
                3'b001 : lcd_id <= 16'h7084;    //7'   RGB LCD  RES:800x480
                3'b010 : lcd_id <= 16'h7016;    //7'   RGB LCD  RES:1024x600
                3'b100 : lcd_id <= 16'h4384;    //4.3' RGB LCD  RES:800x480
                3'b101 : lcd_id <= 16'h1018;    //10'  RGB LCD  RES:1280x800
                default : lcd_id <= 16'd0;
            endcase    
        end
    end    
end
endmodule

```
<!-- endtab -->

<!-- tab clk_divæ¨¡å— -->
```verilog
module clk_div(
    input               clk,          //50Mhz
    input               rst_n,
    input       [15:0]  lcd_id,
    output  reg         lcd_pclk
    );

//reg define
reg          clk_25m;
reg          clk_12_5m;
reg          div_4_cnt;

//*****************************************************
//**                    main code
//*****************************************************

//æ—¶é’Ÿ2åˆ†é¢‘ è¾“å‡º25MHzæ—¶é’Ÿ 
always @(posedge clk or negedge rst_n) begin
    if(!rst_n)
        clk_25m <= 1'b0;
    else 
        clk_25m <= ~clk_25m;
end

//æ—¶é’Ÿ4åˆ†é¢‘ è¾“å‡º12.5MHzæ—¶é’Ÿ 
always @(posedge clk or negedge rst_n) begin
    if(!rst_n) begin
        div_4_cnt <= 1'b0;
        clk_12_5m <= 1'b0;
    end    
    else begin
        div_4_cnt <= div_4_cnt + 1'b1;
        if(div_4_cnt == 1'b1)
            clk_12_5m <= ~clk_12_5m;
		else
			clk_12_5m <= clk_12_5m;
    end        
end

always @(*) begin
    case(lcd_id)
        16'h4342 : lcd_pclk = clk_12_5m;
        16'h7084 : lcd_pclk = clk_25m;       
        16'h7016 : lcd_pclk = clk;
        16'h4384 : lcd_pclk = clk_25m;
        16'h1018 : lcd_pclk = clk;
        default :  lcd_pclk = 1'b0;
    endcase      
end

endmodule
```
<!-- endtab -->

<!-- tab lcd_displayæ¨¡å— -->
```verilog
module lcd_display(
    input                lcd_pclk,    //æ—¶é’Ÿ
    input                rst_n,       //å¤ä½ï¼Œä½ç”µå¹³æœ‰æ•ˆ
    input        [10:0]  pixel_xpos,  //å½“å‰åƒç´ ç‚¹æ¨ªåæ ‡
    input        [10:0]  pixel_ypos,  //å½“å‰åƒç´ ç‚¹çºµåæ ‡  
    input        [10:0]  h_disp,      //LCDå±æ°´å¹³åˆ†è¾¨ç‡
    input        [10:0]  v_disp,      //LCDå±å‚ç›´åˆ†è¾¨ç‡       
    output  reg  [23:0]  pixel_data   //åƒç´ æ•°æ®
    );

//parameter define  
parameter WHITE = 24'hFFFFFF;  //ç™½è‰²
parameter BLACK = 24'h000000;  //é»‘è‰²
parameter RED   = 24'hFF0000;  //çº¢è‰²
parameter GREEN = 24'h00FF00;  //ç»¿è‰²
parameter BLUE  = 24'h0000FF;  //è“è‰²

//*****************************************************
//**                    main code
//*****************************************************

//æ ¹æ®å½“å‰åƒç´ ç‚¹åæ ‡æŒ‡å®šå½“å‰åƒç´ ç‚¹é¢œè‰²æ•°æ®ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå½©æ¡
always @(posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n)
        pixel_data <= BLACK;
    else begin
        if((pixel_xpos >= 11'd0) && (pixel_xpos < h_disp/5*1))
            pixel_data <= WHITE;
        else if((pixel_xpos >= h_disp/5*1) && (pixel_xpos < h_disp/5*2))    
            pixel_data <= BLACK;
        else if((pixel_xpos >= h_disp/5*2) && (pixel_xpos < h_disp/5*3))    
            pixel_data <= RED;   
        else if((pixel_xpos >= h_disp/5*3) && (pixel_xpos < h_disp/5*4))    
            pixel_data <= GREEN;                
        else
            pixel_data <= BLUE; 
    end    
end
  
endmodule

<!-- endtab -->

<!-- tab lcd_driver -->
module lcd_driver(
    input                lcd_pclk,    //æ—¶é’Ÿ
    input                rst_n,       //å¤ä½ï¼Œä½ç”µå¹³æœ‰æ•ˆ
    input        [15:0]  lcd_id,      //LCDå±ID
    input        [23:0]  pixel_data,  //åƒç´ æ•°æ®
    output  reg  [10:0]  pixel_xpos,  //å½“å‰åƒç´ ç‚¹æ¨ªåæ ‡
    output  reg  [10:0]  pixel_ypos,  //å½“å‰åƒç´ ç‚¹çºµåæ ‡   
    output  reg  [10:0]  h_disp,      //LCDå±æ°´å¹³åˆ†è¾¨ç‡
    output  reg  [10:0]  v_disp,      //LCDå±å‚ç›´åˆ†è¾¨ç‡ 
	output  reg          data_req,    //æ•°æ®è¯·æ±‚ä¿¡å·
    //RGB LCDæ¥å£
    output  reg          lcd_de,      //LCD æ•°æ®ä½¿èƒ½ä¿¡å·
    output               lcd_hs,      //LCD è¡ŒåŒæ­¥ä¿¡å·
    output               lcd_vs,      //LCD åœºåŒæ­¥ä¿¡å·
    output               lcd_bl,      //LCD èƒŒå…‰æ§åˆ¶ä¿¡å·
    output               lcd_clk,     //LCD åƒç´ æ—¶é’Ÿ
    output               lcd_rst,     //LCDå¤ä½
    output       [23:0]  lcd_rgb      //LCD RGB888é¢œè‰²æ•°æ®
    );

//parameter define  
// 4.3' 480*272
parameter  H_SYNC_4342   =  11'd41;     //è¡ŒåŒæ­¥
parameter  H_BACK_4342   =  11'd2;      //è¡Œæ˜¾ç¤ºåæ²¿
parameter  H_DISP_4342   =  11'd480;    //è¡Œæœ‰æ•ˆæ•°æ®
parameter  H_FRONT_4342  =  11'd2;      //è¡Œæ˜¾ç¤ºå‰æ²¿
parameter  H_TOTAL_4342  =  11'd525;    //è¡Œæ‰«æå‘¨æœŸ
   
parameter  V_SYNC_4342   =  11'd10;     //åœºåŒæ­¥
parameter  V_BACK_4342   =  11'd2;      //åœºæ˜¾ç¤ºåæ²¿
parameter  V_DISP_4342   =  11'd272;    //åœºæœ‰æ•ˆæ•°æ®
parameter  V_FRONT_4342  =  11'd2;      //åœºæ˜¾ç¤ºå‰æ²¿
parameter  V_TOTAL_4342  =  11'd286;    //åœºæ‰«æå‘¨æœŸ
   
// 7' 800*480   
parameter  H_SYNC_7084   =  11'd128;    //è¡ŒåŒæ­¥
parameter  H_BACK_7084   =  11'd88;     //è¡Œæ˜¾ç¤ºåæ²¿
parameter  H_DISP_7084   =  11'd800;    //è¡Œæœ‰æ•ˆæ•°æ®
parameter  H_FRONT_7084  =  11'd40;     //è¡Œæ˜¾ç¤ºå‰æ²¿
parameter  H_TOTAL_7084  =  11'd1056;   //è¡Œæ‰«æå‘¨æœŸ
   
parameter  V_SYNC_7084   =  11'd2;      //åœºåŒæ­¥
parameter  V_BACK_7084   =  11'd33;     //åœºæ˜¾ç¤ºåæ²¿
parameter  V_DISP_7084   =  11'd480;    //åœºæœ‰æ•ˆæ•°æ®
parameter  V_FRONT_7084  =  11'd10;     //åœºæ˜¾ç¤ºå‰æ²¿
parameter  V_TOTAL_7084  =  11'd525;    //åœºæ‰«æå‘¨æœŸ       
   
// 7' 1024*600   
parameter  H_SYNC_7016   =  11'd20;     //è¡ŒåŒæ­¥
parameter  H_BACK_7016   =  11'd140;    //è¡Œæ˜¾ç¤ºåæ²¿
parameter  H_DISP_7016   =  11'd1024;   //è¡Œæœ‰æ•ˆæ•°æ®
parameter  H_FRONT_7016  =  11'd160;    //è¡Œæ˜¾ç¤ºå‰æ²¿
parameter  H_TOTAL_7016  =  11'd1344;   //è¡Œæ‰«æå‘¨æœŸ
   
parameter  V_SYNC_7016   =  11'd3;      //åœºåŒæ­¥
parameter  V_BACK_7016   =  11'd20;     //åœºæ˜¾ç¤ºåæ²¿
parameter  V_DISP_7016   =  11'd600;    //åœºæœ‰æ•ˆæ•°æ®
parameter  V_FRONT_7016  =  11'd12;     //åœºæ˜¾ç¤ºå‰æ²¿
parameter  V_TOTAL_7016  =  11'd635;    //åœºæ‰«æå‘¨æœŸ
   
// 10.1' 1280*800   
parameter  H_SYNC_1018   =  11'd10;     //è¡ŒåŒæ­¥
parameter  H_BACK_1018   =  11'd80;     //è¡Œæ˜¾ç¤ºåæ²¿
parameter  H_DISP_1018   =  11'd1280;   //è¡Œæœ‰æ•ˆæ•°æ®
parameter  H_FRONT_1018  =  11'd70;     //è¡Œæ˜¾ç¤ºå‰æ²¿
parameter  H_TOTAL_1018  =  11'd1440;   //è¡Œæ‰«æå‘¨æœŸ
   
parameter  V_SYNC_1018   =  11'd3;      //åœºåŒæ­¥
parameter  V_BACK_1018   =  11'd10;     //åœºæ˜¾ç¤ºåæ²¿
parameter  V_DISP_1018   =  11'd800;    //åœºæœ‰æ•ˆæ•°æ®
parameter  V_FRONT_1018  =  11'd10;     //åœºæ˜¾ç¤ºå‰æ²¿
parameter  V_TOTAL_1018  =  11'd823;    //åœºæ‰«æå‘¨æœŸ

// 4.3' 800*480   
parameter  H_SYNC_4384   =  11'd128;    //è¡ŒåŒæ­¥
parameter  H_BACK_4384   =  11'd88;     //è¡Œæ˜¾ç¤ºåæ²¿
parameter  H_DISP_4384   =  11'd800;    //è¡Œæœ‰æ•ˆæ•°æ®
parameter  H_FRONT_4384  =  11'd40;     //è¡Œæ˜¾ç¤ºå‰æ²¿
parameter  H_TOTAL_4384  =  11'd1056;   //è¡Œæ‰«æå‘¨æœŸ
   
parameter  V_SYNC_4384   =  11'd2;      //åœºåŒæ­¥
parameter  V_BACK_4384   =  11'd33;     //åœºæ˜¾ç¤ºåæ²¿
parameter  V_DISP_4384   =  11'd480;    //åœºæœ‰æ•ˆæ•°æ®
parameter  V_FRONT_4384  =  11'd10;     //åœºæ˜¾ç¤ºå‰æ²¿
parameter  V_TOTAL_4384  =  11'd525;    //åœºæ‰«æå‘¨æœŸ    

//reg define
reg  [10:0] h_sync ;
reg  [10:0] h_back ;
reg  [10:0] h_total;
reg  [10:0] v_sync ;
reg  [10:0] v_back ;
reg  [10:0] v_total;
reg  [10:0] h_cnt  ;
reg  [10:0] v_cnt  ;

//*****************************************************
//**                    main code
//*****************************************************

//RGB LCD é‡‡ç”¨DEæ¨¡å¼æ—¶ï¼Œè¡ŒåœºåŒæ­¥ä¿¡å·éœ€è¦æ‹‰é«˜
assign  lcd_hs = 1'b1;        //LCDè¡ŒåŒæ­¥ä¿¡å·
assign  lcd_vs = 1'b1;        //LCDåœºåŒæ­¥ä¿¡å·

assign  lcd_bl = 1'b1;        //LCDèƒŒå…‰æ§åˆ¶ä¿¡å·  
assign  lcd_clk = lcd_pclk;   //LCDåƒç´ æ—¶é’Ÿ
assign  lcd_rst= 1'b1;        //LCDå¤ä½

//RGB888æ•°æ®è¾“å‡º
assign lcd_rgb = lcd_de ? pixel_data : 24'd0;

//åƒç´ ç‚¹xåæ ‡
always@ (posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n)
        pixel_xpos <= 11'd0;
    else if(data_req)
        pixel_xpos <= h_cnt + 2'd2 - h_sync - h_back ;
    else 
        pixel_xpos <= 11'd0;
end
   
//åƒç´ ç‚¹yåæ ‡   
always@ (posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n)
        pixel_ypos <= 11'd0;
    else if(v_cnt >= (v_sync + v_back)&&v_cnt < (v_sync + v_back + v_disp))
        pixel_ypos <= v_cnt + 1'b1 - (v_sync + v_back) ;
    else 
        pixel_ypos <= 11'd0;
end

//è¡Œåœºæ—¶åºå‚æ•°
always @(*) begin
    case(lcd_id)
        16'h4342 : begin
            h_sync  = H_SYNC_4342; 
            h_back  = H_BACK_4342; 
            h_disp  = H_DISP_4342; 
            h_total = H_TOTAL_4342;
            v_sync  = V_SYNC_4342; 
            v_back  = V_BACK_4342; 
            v_disp  = V_DISP_4342; 
            v_total = V_TOTAL_4342;            
        end
        16'h7084 : begin
            h_sync  = H_SYNC_7084; 
            h_back  = H_BACK_7084; 
            h_disp  = H_DISP_7084; 
            h_total = H_TOTAL_7084;
            v_sync  = V_SYNC_7084; 
            v_back  = V_BACK_7084; 
            v_disp  = V_DISP_7084; 
            v_total = V_TOTAL_7084;        
        end
        16'h7016 : begin
            h_sync  = H_SYNC_7016; 
            h_back  = H_BACK_7016; 
            h_disp  = H_DISP_7016; 
            h_total = H_TOTAL_7016;
            v_sync  = V_SYNC_7016; 
            v_back  = V_BACK_7016; 
            v_disp  = V_DISP_7016; 
            v_total = V_TOTAL_7016;            
        end
        16'h4384 : begin
            h_sync  = H_SYNC_4384; 
            h_back  = H_BACK_4384; 
            h_disp  = H_DISP_4384; 
            h_total = H_TOTAL_4384;
            v_sync  = V_SYNC_4384; 
            v_back  = V_BACK_4384; 
            v_disp  = V_DISP_4384; 
            v_total = V_TOTAL_4384;             
        end        
        16'h1018 : begin
            h_sync  = H_SYNC_1018; 
            h_back  = H_BACK_1018; 
            h_disp  = H_DISP_1018; 
            h_total = H_TOTAL_1018;
            v_sync  = V_SYNC_1018; 
            v_back  = V_BACK_1018; 
            v_disp  = V_DISP_1018; 
            v_total = V_TOTAL_1018;        
        end
        default : begin
            h_sync  = H_SYNC_4342; 
            h_back  = H_BACK_4342; 
            h_disp  = H_DISP_4342; 
            h_total = H_TOTAL_4342;
            v_sync  = V_SYNC_4342; 
            v_back  = V_BACK_4342; 
            v_disp  = V_DISP_4342; 
            v_total = V_TOTAL_4342;          
        end
    endcase
end
	
//æ•°æ®ä½¿èƒ½ä¿¡å·		
always@ (posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n)	
		lcd_de <= 1'b0;
	else
		lcd_de <= data_req;
end
				  
//è¯·æ±‚åƒç´ ç‚¹é¢œè‰²æ•°æ®è¾“å…¥  
always@ (posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n)	
		data_req<=1'b0;
	else if((h_cnt >= h_sync + h_back - 2'd2) && (h_cnt < h_sync + h_back + h_disp - 2'd2)
             && (v_cnt >= v_sync + v_back) && (v_cnt < v_sync + v_back + v_disp))
		data_req <= 1'b1;
	else
		data_req <= 1'b0;
end
				  
//è¡Œè®¡æ•°å™¨å¯¹åƒç´ æ—¶é’Ÿè®¡æ•°
always@ (posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n) 
        h_cnt <= 11'd0;
    else begin
        if(h_cnt == h_total - 1'b1)
            h_cnt <= 11'd0;
        else
            h_cnt <= h_cnt + 1'b1;           
    end
end

//åœºè®¡æ•°å™¨å¯¹è¡Œè®¡æ•°
always@ (posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n) 
        v_cnt <= 11'd0;
    else begin
        if(h_cnt == h_total - 1'b1) begin
            if(v_cnt == v_total - 1'b1)
                v_cnt <= 11'd0;
            else
                v_cnt <= v_cnt + 1'b1;    
        end
    end    
end

endmodule
```
<!-- endtab -->

<!-- tab  lcd_rgb_colorbar -->
```verilog
module lcd_rgb_colorbar(
    input                sys_clk,     //ç³»ç»Ÿæ—¶é’Ÿ
    input                sys_rst_n,   //ç³»ç»Ÿå¤ä½

    //RGB LCDæ¥å£
    output               lcd_de,      //LCD æ•°æ®ä½¿èƒ½ä¿¡å·
    output               lcd_hs,      //LCD è¡ŒåŒæ­¥ä¿¡å·
    output               lcd_vs,      //LCD åœºåŒæ­¥ä¿¡å·
    output               lcd_bl,      //LCD èƒŒå…‰æ§åˆ¶ä¿¡å·
    output               lcd_clk,     //LCD åƒç´ æ—¶é’Ÿ
    output               lcd_rst,     //LCD å¤ä½
    inout        [23:0]  lcd_rgb      //LCD RGB888é¢œè‰²æ•°æ®
    );                                                      
    
//wire define    
wire  [15:0]  lcd_id    ;    //LCDå±ID
wire          lcd_pclk  ;    //LCDåƒç´ æ—¶é’Ÿ
              
wire  [10:0]  pixel_xpos;    //å½“å‰åƒç´ ç‚¹æ¨ªåæ ‡
wire  [10:0]  pixel_ypos;    //å½“å‰åƒç´ ç‚¹çºµåæ ‡
wire  [10:0]  h_disp    ;    //LCDå±æ°´å¹³åˆ†è¾¨ç‡
wire  [10:0]  v_disp    ;    //LCDå±å‚ç›´åˆ†è¾¨ç‡
wire  [23:0]  pixel_data;    //åƒç´ æ•°æ®
wire  [23:0]  lcd_rgb_o ;    //è¾“å‡ºçš„åƒç´ æ•°æ®
wire  [23:0]  lcd_rgb_i ;    //è¾“å…¥çš„åƒç´ æ•°æ®

//*****************************************************
//**                    main code
//*****************************************************

//åƒç´ æ•°æ®æ–¹å‘åˆ‡æ¢
assign lcd_rgb = lcd_de ?  lcd_rgb_o :  {24{1'bz}};
assign lcd_rgb_i = lcd_rgb;

//è¯»LCD IDæ¨¡å—
rd_id u_rd_id(
    .clk          (sys_clk  ),
    .rst_n        (sys_rst_n),
    .lcd_rgb      (lcd_rgb_i),
    .lcd_id       (lcd_id   )
    );    

//æ—¶é’Ÿåˆ†é¢‘æ¨¡å—    
clk_div u_clk_div(
    .clk           (sys_clk  ),
    .rst_n         (sys_rst_n),
    .lcd_id        (lcd_id   ),
    .lcd_pclk      (lcd_pclk )
    );    

//LCDæ˜¾ç¤ºæ¨¡å—    
lcd_display u_lcd_display(
    .lcd_pclk       (lcd_pclk  ),
    .rst_n          (sys_rst_n ),
    .pixel_xpos     (pixel_xpos),
    .pixel_ypos     (pixel_ypos),
    .h_disp         (h_disp    ),
    .v_disp         (v_disp    ),
    .pixel_data     (pixel_data)
    );    

//LCDé©±åŠ¨æ¨¡å—
lcd_driver u_lcd_driver(
    .lcd_pclk      (lcd_pclk  ),
    .rst_n         (sys_rst_n ),
    .lcd_id        (lcd_id    ),
    .pixel_data    (pixel_data),
    .pixel_xpos    (pixel_xpos),
    .pixel_ypos    (pixel_ypos),
    .h_disp        (h_disp    ),
    .v_disp        (v_disp    ),
	.data_req	   (		  ),
	
    .lcd_de        (lcd_de    ),
    .lcd_hs        (lcd_hs    ),
    .lcd_vs        (lcd_vs    ),
    .lcd_bl        (lcd_bl    ),
    .lcd_clk       (lcd_clk   ),
    .lcd_rst       (lcd_rst   ),
    .lcd_rgb       (lcd_rgb_o )
    );

endmodule
```
<!-- endtab -->
{% endtabs %}
# 4.å®éªŒç»“æœå±•ç¤º
<img src="https://bu.dusays.com/2024/03/06/65e8585c17038.jpg" alt="1709725784991.jpg" title="1709725784991.jpg" />

# 5.å®éªŒæ‰©å±•ï¼ˆLCDæ˜¾ç¤ºå­—ç¬¦å’Œå›¾ç‰‡ï¼‰
> æ‰©å±•å®éªŒä»»åŠ¡è¦æ±‚ï¼šåœ¨ä¹‹å‰å®éªŒåŸºç¡€ä¸Šï¼Œå°†æ˜¾ç¤ºå½©æ¡å˜ä¸ºæ˜¾ç¤ºå›¾ç‰‡å’Œå­—ç¬¦ã€‚
## 5.1ä»£ç å’Œæ“ä½œæ­¥éª¤
&emsp; **å¯¹ä»£ç çš„ä¿®æ”¹ä¸»è¦æ˜¯é’ˆå¯¹lcd_displayæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—ä¸»è¦ä½œç”¨æ˜¯æ§åˆ¶LCDæ˜¾ç¤ºçš„å­—ç¬¦å’Œæ˜¾ç¤ºçš„å›¾ç‰‡ã€‚å…¶å¯ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š**
```verilog
module lcd_display(
    input             lcd_pclk,     //æ—¶é’Ÿ
    input             rst_n,        //å¤ä½ï¼Œä½ç”µå¹³æœ‰æ•ˆ
                                    
    input      [10:0] pixel_xpos,   //åƒç´ ç‚¹æ¨ªåæ ‡
    input      [10:0] pixel_ypos,   //åƒç´ ç‚¹çºµåæ ‡    
    output reg [23:0] pixel_data    //åƒç´ ç‚¹æ•°æ®,
);                                   
                                     
//parameter define                   
localparam PIC_X_START = 11'd10;     //å›¾ç‰‡èµ·å§‹ç‚¹æ¨ªåæ ‡
localparam PIC_Y_START = 11'd10;     //å›¾ç‰‡èµ·å§‹ç‚¹çºµåæ ‡
localparam PIC_WIDTH   = 11'd100;    //å›¾ç‰‡å®½åº¦
localparam PIC_HEIGHT  = 11'd100;    //å›¾ç‰‡é«˜åº¦
                       
localparam CHAR_X_START= 11'd10;     //å­—ç¬¦èµ·å§‹ç‚¹æ¨ªåæ ‡
localparam CHAR_Y_START= 11'd120;    //å­—ç¬¦èµ·å§‹ç‚¹çºµåæ ‡
localparam CHAR_WIDTH  = 11'd216;    //å­—ç¬¦å®½åº¦,6ä¸ªå­—ç¬¦:36*6
localparam CHAR_HEIGHT = 11'd34;     //å­—ç¬¦é«˜åº¦
                       
localparam BACK_COLOR  = 24'hE0FFFF; //èƒŒæ™¯è‰²ï¼Œæµ…è“è‰²
localparam CHAR_COLOR  = 24'hff0000; //å­—ç¬¦é¢œè‰²ï¼Œçº¢è‰²

//reg define
reg   [215:0] char[33:0];  //å­—ç¬¦æ•°ç»„
reg   [13:0]  rom_addr  ;  //ROMåœ°å€

//wire define   
wire  [10:0]  x_cnt;       //æ¨ªåæ ‡è®¡æ•°å™¨
wire  [10:0]  y_cnt;       //çºµåæ ‡è®¡æ•°å™¨
wire          rom_rd_en ;  //ROMè¯»ä½¿èƒ½ä¿¡å·
wire  [23:0]  rom_rd_data ;//ROMæ•°æ®

//*****************************************************
//**                    main code
//*****************************************************

assign  x_cnt = pixel_xpos + 1'b1  - CHAR_X_START; //åƒç´ ç‚¹ç›¸å¯¹äºå­—ç¬¦åŒºåŸŸèµ·å§‹ç‚¹æ°´å¹³åæ ‡
assign  y_cnt = pixel_ypos - CHAR_Y_START; //åƒç´ ç‚¹ç›¸å¯¹äºå­—ç¬¦åŒºåŸŸèµ·å§‹ç‚¹å‚ç›´åæ ‡
assign  rom_rd_en = 1'b1;                  //è¯»ä½¿èƒ½æ‹‰é«˜ï¼Œå³ä¸€ç›´è¯»ROMæ•°æ®

//ç»™å­—ç¬¦æ•°ç»„èµ‹å€¼ï¼Œæ˜¾ç¤ºæ±‰å­—â€œæ­£ç‚¹åŸå­â€ï¼Œæ¯ä¸ªæ±‰å­—å¤§å°ä¸º32*32
always @(posedge lcd_pclk) begin
      char[0 ]  <= 216'h000000000000000000000000000000000000000000000000000000;
      char[1 ]  <= 216'h000000000000000000000000000000000000000000000000006000;
      char[2 ]  <= 216'h0000000000000C0000000700000000000000000000000000003800;
      char[3 ]  <= 216'h0000000000000E0000000380000000001800000380000000183000;
      char[4 ]  <= 216'h00000F0000000E00000001C000000000FE000001C00000031C7000;
      char[5 ]  <= 216'h0003FF8000000C00000000C00000003F0F000001C00000038C6000;
      char[6 ]  <= 216'h00FFFE0000000C0000000000000020181C000001800000018C4000;
      char[7 ]  <= 216'h007FF00000000DE00000001FE0003C00300000018000000184C000;
      char[8 ]  <= 216'h001CF00000003FE0000007FFF0001C03C000000180000000808300;
      char[9 ]  <= 216'h001EF0000001FE000007FE0000000C01800000018000000001FF80;
      char[10]  <= 216'h001CF000000018000003800000000000BE000001800000207F01E0;
      char[11]  <= 216'h001CF000000018060000103800000003CE0000018000003F8003E0;
      char[12]  <= 216'h001CFFF8000010FF0000181E0000003D8600000183E00060000300;
      char[13]  <= 216'h001FFFFC00003F03C0001C0F0000003186000001FFE000600F0400;
      char[14]  <= 216'h1FFFE03E000FC703C000380300001831A60003FFE00000E3F38000;
      char[15]  <= 216'h0FDCE03E007887018000703100007C13E60001F9800000C3838000;
      char[16]  <= 216'h0F1CE03C0060C6018000C0380000D81186000001800000C0060000;
      char[17]  <= 216'h071CF83C0020C40180018030000018118600000180000000040000;
      char[18]  <= 216'h071CFE3C002047C10002386000001031F600000380000000180600;
      char[19]  <= 216'h07387E3800207E0100000C6000001837E6000003400000000FFF80;
      char[20]  <= 216'h073800380021F801000006C0000018318600000360000003FE0180;
      char[21]  <= 216'h07F0007800201843000003C00000083186000006300001FF060000;
      char[22]  <= 216'h0380007800201FE300000180000008318600000638000000060000;
      char[23]  <= 216'h0383FE7800207E03000003E0000008213E00000E18000000060000;
      char[24]  <= 216'h03FFFFF00027D803000006700000FE211E00000C0C000000060000;
      char[25]  <= 216'h03F807F00020180300001C1C0001C1E10E0000180F000000060000;
      char[26]  <= 216'h038003F0002018030000380F0000007C0400003807800000060000;
      char[27]  <= 216'h000003E0002018370000E007C000000FE000006003E00000060000;
      char[28]  <= 216'h000001C00020181F00078003FE000003FFF000C003F800000E0000;
      char[29]  <= 216'h000001800020180F00000001FF000000FF80030001FF00007C0000;
      char[30]  <= 216'h0000000000000006000000002000000018000000000000003C0000;
      char[31]  <= 216'h000000000000000600000000000000000000000000000000180000;
      char[32]  <= 216'h000000000000000000000000000000000000000000000000000000;
      char[33]  <= 216'h000000000000000000000000000000000000000000000000000000;
end

//ä¸ºLCDä¸åŒæ˜¾ç¤ºåŒºåŸŸç»˜åˆ¶å›¾ç‰‡ã€å­—ç¬¦å’ŒèƒŒæ™¯è‰²
always @(posedge lcd_pclk or negedge rst_n) begin
    if (!rst_n)
        pixel_data <= BACK_COLOR;
    else if( (pixel_xpos >= PIC_X_START - 1'b1) && (pixel_xpos < PIC_X_START + PIC_WIDTH - 1'b1) 
          && (pixel_ypos >= PIC_Y_START) && (pixel_ypos < PIC_Y_START + PIC_HEIGHT) )
        pixel_data <= rom_rd_data ;  //æ˜¾ç¤ºå›¾ç‰‡
    else if((pixel_xpos >= CHAR_X_START - 1'b1) && (pixel_xpos < CHAR_X_START + CHAR_WIDTH - 1'b1)
         && (pixel_ypos >= CHAR_Y_START) && (pixel_ypos < CHAR_Y_START + CHAR_HEIGHT)) begin
        if(char[y_cnt][CHAR_WIDTH -1'b1 - x_cnt])
            pixel_data <= CHAR_COLOR;    //æ˜¾ç¤ºå­—ç¬¦
        else
            pixel_data <= BACK_COLOR;    //æ˜¾ç¤ºå­—ç¬¦åŒºåŸŸçš„èƒŒæ™¯è‰²
    end
    else
        pixel_data <= BACK_COLOR;        //å±å¹•èƒŒæ™¯è‰²
end

//æ ¹æ®å½“å‰æ‰«æç‚¹çš„æ¨ªçºµåæ ‡ä¸ºROMåœ°å€èµ‹å€¼
always @(posedge lcd_pclk or negedge rst_n) begin
    if(!rst_n)
        rom_addr <= 14'd0;
    //å½“æ¨ªçºµåæ ‡ä½äºå›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸæ—¶,ç´¯åŠ ROMåœ°å€    
    else if((pixel_ypos >= PIC_Y_START) && (pixel_ypos < PIC_Y_START + PIC_HEIGHT) 
        && (pixel_xpos >= PIC_X_START - 2'd2) && (pixel_xpos < PIC_X_START + PIC_WIDTH - 2'd2)) 
        rom_addr <= rom_addr + 1'b1;
    //å½“æ¨ªçºµåæ ‡ä½äºå›¾ç‰‡åŒºåŸŸæœ€åä¸€ä¸ªåƒç´ ç‚¹æ—¶,ROMåœ°å€æ¸…é›¶    
    else if((pixel_ypos >= PIC_Y_START + PIC_HEIGHT))
        rom_addr <= 14'd0;
end
```
&emsp; **ä¸‹é¢ä»¥æ˜¾ç¤ºå­—ç¬¦ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä¿®æ”¹ä¸Šè¿°ä»£ç å®ç°æ˜¾ç¤ºä¸åŒçš„å­—ç¬¦ã€‚**
1. é¦–å…ˆæˆ‘ä»¬è¦ç¡®å®šæˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºçš„å­—ç¬¦ä»¥åŠå­—ç¬¦çš„å­—å®½å’Œå­—é«˜ã€‚è¿™é‡Œä»¥`æ­£ç‚¹åŸå­`ä¸ºä¾‹ï¼Œå­—é«˜å’Œå­—å®½éƒ½ä¸º32ã€‚ 
2. æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€æ¬¾è½¯ä»¶ï¼ˆPCtoLCDï¼‰ï¼Œå®ƒå¯ä»¥å°†å­—ç¬¦ç‚¹é˜µè½¬åŒ–ä¸º16è¿›åˆ¶ä»£ç ã€‚è½¯ä»¶è·å–æ–¹å¼ï¼š{% cell è½¯ä»¶ä¸‹è½½, https://wwe.lanzoui.com/iIBEzs77lcf, fas fa-download %}
3. æ‰“å¼€è½¯ä»¶åï¼Œæ¥ä¸‹æ¥å¦‚ä¸‹å›¾æ‰€ç¤ºè¿›è¡Œæ“ä½œï¼š
{% gallery true,,10 %}
![](https://bu.dusays.com/2024/03/07/65e992b6e7952.png)
![](https://bu.dusays.com/2024/03/07/65e992b6d3268.png)
{% endgallery %}
4. ç‚¹å‡»å·¦ä¸Šè§’æ–‡ä»¶->å¦å­˜ä¸ºç±»å‹ä¸º.bmpçš„å›¾ç‰‡æ–‡ä»¶ã€‚æ¥ç€åœ¨æ­¤å¤„æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œè¿™æ—¶å¯ä»¥æ³¨æ„åˆ°è½¯ä»¶å·²ç»ä»å­—ç¬¦æ¨¡å¼å˜ä¸ºå›¾ç‰‡æ¨¡å¼ã€‚
5. ç‚¹å‡»ä¸‹æ–¹ç”Ÿæˆå­—æ¨¡ã€‚å¹¶å¤åˆ¶å­—æ¨¡ï¼Œå¯¹verilogè¿›è¡Œä¿®æ”¹ï¼Œå³å¯å®ç°åœ¨LCDä¸Šæ˜¾ç¤º`æ­£ç‚¹åŸå­`ã€‚

## 5.2è¯¦ç»†ä¿®æ”¹è¿‡ç¨‹
> è¿™ä¸ªä¿®æ”¹è¿‡ç¨‹å…¶å®æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œå½“æ—¶ä¹Ÿæ˜¯æŠ˜ç£¨äº†æˆ‘å¾ˆä¹…æˆ‘æ‰æƒ³æ˜ç™½æ€ä¹ˆå›äº‹ã€‚ğŸ˜­ğŸ˜­ğŸ˜­
1. æ˜¾ç¤ºçš„å­—ç¬¦å’ŒVerilogç¨‹åºçš„å¯¹åº”å…³ç³»ï¼š
- å­—é«˜: å®ƒå†³å®šäº†charè¿™ä¸ªæ•°ç»„çš„ç»´æ•°ã€‚å½“ä½ çš„å­—é«˜è®¾ç½®ä¸º32æ—¶ï¼Œé‚£ä¹ˆå˜é‡å°±è¦å®šä¹‰ä¸ºchar[31:0]ã€‚
- å­—æ•°å’Œå­—å®½ï¼šè¿™ä¸¤ä¸ªå‚æ•°å…±åŒå†³å®šäº†charè¿™ä¸ªå˜é‡çš„ä½æ•°ã€‚ä¾‹å¦‚å­—å®½ä¸º32å­—æ•°ä¸º4æ—¶ï¼Œé‚£ä¹ˆå˜é‡charä½æ•°å°±æ˜¯`4*32=128`ä½ï¼Œç»“åˆä¸Šé¢å¯ä»¥ç»™å‡ºcharå˜é‡çš„æœ€ç»ˆå®šä¹‰`reg [127:0] char[31:0]`ã€‚å¦å¤–å®ƒä¹Ÿå†³å®šäº†CHAR_WIDTHçš„èµ‹å€¼ã€‚å®ƒçš„èµ‹å€¼ç»“æœä¸º`localparam CHAR_WIDTH  = 11'd128; `ã€‚
- å­—ç¬¦ï¼šå®ƒå†³å®šäº†charå˜é‡çš„èµ‹å€¼ï¼Œä¸åŒçš„å­—ç¬¦å¯¹åº”ä¸åŒçš„å­—æ¨¡ã€‚
2. æ˜¾ç¤ºçš„å­—ç¬¦ä¸PCtoLCDè½¯ä»¶å‚æ•°çš„è®¾ç½®ä¹‹é—´çš„å…³ç³»ï¼š
> è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç‚¹é˜µçš„æ˜¾ç¤ºå•ä½æ˜¯å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯å…«ä½ï¼Œæ‰€ä»¥åœ¨æ¯ä¸€è¡Œè¦æ˜¾ç¤ºçš„ä½æ•°ä¸€å®šæ˜¯8çš„å€æ•°ï¼Œéµå®ˆè¿™æ¡è§„åˆ™çš„å‰æä¸‹ï¼Œä¸‹é¢çš„è®¾ç½®å°±éå¸¸å¥½ç†è§£äº†ã€‚
- å­—æ•°å’Œå­—å®½ï¼šç”±äºä¸€è¡Œæ˜¾ç¤ºçš„ä½æ•°ä¸€å®šè¦æ˜¯8çš„å€æ•°ï¼Œå½“æˆ‘ä»¬ç¡®è®¤äº†å­—æ•°å’Œå­—å®½ï¼Œé‚£ä¹ˆä¸€è¡Œæ˜¾ç¤ºçš„ä½æ•°å°±ç¡®å®šäº†ï¼Œä½æ•° = å­—æ•°*å­—å®½ã€‚å¦‚æœæ¬¡æ•°çš„ä½æ•°ä¸æ»¡è¶³æ˜¯8çš„å€æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ å­—ç¬¦ä¹‹é—´çš„é—´éš”è®©å…¶æ»¡è¶³ä¸Šè¿°æ¡ä»¶ã€‚ä¾‹å¦‚å­—æ•°ä¸º6ï¼Œå­—å®½ä¸º34çš„`è¥¿å—äº¤é€šå¤§å­¦`ï¼Œé€šè¿‡è®¡ç®—å‘ç°6 * 34 = 204,è¿™å¹¶ä¸æ˜¯8çš„æ•´æ•°å€ï¼Œæƒ³è¦ç¡®ä¿å­—ç¬¦çš„å­—å®½ä»ä¸º34ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨å­—ç¬¦ä¹‹é—´åŠ å…¥2ä¸ªé—´éš”ã€‚è¿™ä¸ªé—´éš”çš„ä¸ªæ•°å¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—å¾—å‡ºã€‚
> å‡è®¾å­—æ•°ä¸ºnumï¼Œå­—å®½ä¸ºfont_wï¼Œå­—é—´éš”ä¸ºfont_emptyï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¦‚ä¸‹ç­‰å¼ï¼š`(font_w + font_empty)*num %8 = 0`ã€‚
- å­—æ•°å’Œå­—å®½ï¼šåŒæ ·çš„ï¼Œè¿™ä¸¤ä¸ªå› ç´ è¿˜å†³å®šäº†è½¯ä»¶çš„ `å­—æ¨¡é€‰é¡¹ä¸­->æ¯è¡Œæ˜¾ç¤ºæ•°æ®->ç‚¹é˜µ` ä¸­çš„å€¼ï¼Œåœ¨ä½æ•°æ»¡è¶³8çš„æ•´æ•°å€å‰æä¸‹ï¼Œ`å€¼ = (font_w + font_empty)*num /8`ã€‚
